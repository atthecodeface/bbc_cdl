<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>CDL Modules: cdl/inc/csr_interface.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CDL Modules
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b89025be567f5b6d36b8bc23257fdaf4.html">cdl</a></li><li class="navelem"><a class="el" href="dir_af298877340144433539b3d17cce7a97.html">inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">csr_interface.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Types and modules for the CSR interface.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Types and modules for the CSR interface. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>(C) 2016-2017, Gavin J Stark. All rights reserved.</dd>
<dd>
Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>. Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</dd></dl>
<p>Header file for the types and modules in the pipelined CSR interface, including APB target to CSR master, CSR target to APB master, and CSR target to simple CSR access. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structt__csr__request"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="csr__interface_8h.html#structt__csr__request">t_csr_request</a></td></tr>
<tr class="separator:structt__csr__request"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structt__csr__response"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="csr__interface_8h.html#structt__csr__response">t_csr_response</a></td></tr>
<tr class="separator:structt__csr__response"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:structt__csr__access"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="csr__interface_8h.html#structt__csr__access">t_csr_access</a></td></tr>
<tr class="separator:structt__csr__access"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aaddaa76f39ec224e00fc5e04437992f4"><td class="memItemLeft" align="right" valign="top">typedef bit[32]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="csr__interface_8h.html#aaddaa76f39ec224e00fc5e04437992f4">t_csr_access_data</a></td></tr>
<tr class="separator:aaddaa76f39ec224e00fc5e04437992f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structt__csr__request" id="structt__csr__request"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct t_csr_request</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>This is the request structure for the pipelined CSR interface.</p>
<p>A valid request has <em>valid</em> asserted; this must remain asserted until <em>acknowledge</em> is seen in response; another request must not be driven until <em>acknowledge</em> is seen to be low.</p>
<p>A valid request has read_not_write (1 for read, 0 for write); select (a 16-bit field) and address (a 16-bit field).</p>
<p>For write requests the data is up to 64 bits - although many registers are shorter.</p>
<p>For read responses a valid request will return a <em>read_data_valid</em> signal with valid <em>read_data</em>.</p>
<p>This structure should be driven by:</p>
<p><a class="el" href="namespacecsr__master__apb.html">csr_master_apb</a> In response to an APB, this masters the CSR pipelined interface</p>
<p>This structure should terminate (as leaves) in one or more of:</p>
<p><a class="el" href="namespacecsr__target__csr.html">csr_target_csr</a> Provides a <a class="el" href="csr__interface_8h.html#structt__csr__access">t_csr_access</a> to a target</p>
<p><a class="el" href="namespacecsr__target__apb.html">csr_target_apb</a> Provides an APB interface to a target</p>
<p><a class="el" href="namespacecsr__target__timeout.html">csr_target_timeout</a> Automatically times out transactions if the bus hangs for a while </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aa0bda5ec55efe38ee67c38a61dbce391"></a>bit[16]</td>
<td class="fieldname">
address</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a27b2d7f0078cb98e7f666b31d87e9295"></a>bit[32]</td>
<td class="fieldname">
data</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a0274545b38aa823251f47ea6d50c4a22"></a>bit</td>
<td class="fieldname">
read_not_write</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a1313be147f804b2b969fce53743798b0"></a>bit[16]</td>
<td class="fieldname">
select</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a11fd84d1ed88c6ec6488f8e32f1b78a8"></a>bit</td>
<td class="fieldname">
valid</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="structt__csr__response" id="structt__csr__response"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct t_csr_response</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>This is the response structure returning from a target on the CSR bus system back to the master. The 'ack' signal is asserted by a target from the point that the request is detected as valid and serviceable (i.e. a valid request with matching select) until the access is performed. The valid signal should be held high until an acknowledge is seen; it should then be taken low for at least one clock tick.</p>
<p>The CSR response from more than one target may be wire-ored together, and pipeline stages may be added as required for timing. </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a596029b00ea262cebb13afa22f732fd0"></a>bit</td>
<td class="fieldname">
acknowledge</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a693e08defa58fa68f108213cf4a45739"></a>bit[32]</td>
<td class="fieldname">
read_data</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ac80ffc4e40542b6528d6d3b3eede3b46"></a>bit</td>
<td class="fieldname">
read_data_error</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a15de483b394e3d39bb03c8f7415b4f88"></a>bit</td>
<td class="fieldname">
read_data_valid</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<a name="structt__csr__access" id="structt__csr__access"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct t_csr_access</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>To simplify design of CSR targets the 'csr_interface' module converts a t_csr_request/t_csr_response interface into this simple CSR access request interface. Doing this hides the complexity of the shared, pipelined CSR request/response bus from the targets, and ensures consistent operation of targets.</p>
<p>This access bus has signals that are valid for a single cycle. The access requested must be performed in that cycle. Read data for the access must be provided in the cycle of the request (combinatorially on 'address'). </p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a880144730eb1499212a05b7f7429ef44"></a>bit[16]</td>
<td class="fieldname">
address</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a2d1a4c9ced158be76da07482ee62979a"></a>bit[32]</td>
<td class="fieldname">
data</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a2f9ce100e0b741f58f6ac17712c7bca8"></a>bit</td>
<td class="fieldname">
read_not_write</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a389aa432e3fb417711675a4f6b6c9415"></a>bit</td>
<td class="fieldname">
valid</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="aaddaa76f39ec224e00fc5e04437992f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef bit [32] <a class="el" href="csr__interface_8h.html#aaddaa76f39ec224e00fc5e04437992f4">t_csr_access_data</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This type conveys a response (in the same cycle as a valid CSR access request) to the csr_interface for a target using that module. </p>

</div>
</div>
<h2 class="groupheader">Modules</h2>
<a class="anchor" id="a5f33f0740bfadf45bb5a28f7ecc5867e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module csr_master_apb </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="apb_8h.html#structt__apb__request">t_apb_request</a>&#160;</td>
          <td class="paramname"><em>apb_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="apb_8h.html#structt__apb__response">t_apb_response</a>&#160;</td>
          <td class="paramname"><em>apb_response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="csr__interface_8h.html#structt__csr__response">t_csr_response</a>&#160;</td>
          <td class="paramname"><em>csr_response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="csr__interface_8h.html#structt__csr__request">t_csr_request</a>&#160;</td>
          <td class="paramname"><em>csr_request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>Clock for the CSR interface; a superset of all targets clock </td></tr>
    <tr><td class="paramname">reset_n</td><td>Active low reset </td></tr>
    <tr><td class="paramname">apb_request</td><td>APB request from master </td></tr>
    <tr><td class="paramname">apb_response</td><td>APB response to master </td></tr>
    <tr><td class="paramname">csr_response</td><td>Pipelined csr request interface response </td></tr>
    <tr><td class="paramname">csr_request</td><td>Pipelined csr request interface output </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2e452919e817e5f86165af725dee5316"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module csr_target_apb </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="csr__interface_8h.html#structt__csr__request">t_csr_request</a>&#160;</td>
          <td class="paramname"><em>csr_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="csr__interface_8h.html#structt__csr__response">t_csr_response</a>&#160;</td>
          <td class="paramname"><em>csr_response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="apb_8h.html#structt__apb__request">t_apb_request</a>&#160;</td>
          <td class="paramname"><em>apb_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="apb_8h.html#structt__apb__response">t_apb_response</a>&#160;</td>
          <td class="paramname"><em>apb_response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>csr_select</em>[16]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">clk</td><td>Clock for the CSR interface, possibly gated version of master CSR clock </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reset_n</td><td>Active low reset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">csr_request</td><td>Pipelined csr request interface input </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">csr_response</td><td>Pipelined csr request interface response </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">apb_request</td><td>APB request to target </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">apb_response</td><td>APB response from target </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">csr_select</td><td>Hard-wired select value for the client </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a56e51b25d6e9f7126fe9d7d172fe54c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module csr_target_csr </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="csr__interface_8h.html#structt__csr__request">t_csr_request</a>&#160;</td>
          <td class="paramname"><em>csr_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="csr__interface_8h.html#structt__csr__response">t_csr_response</a>&#160;</td>
          <td class="paramname"><em>csr_response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="csr__interface_8h.html#structt__csr__access">t_csr_access</a>&#160;</td>
          <td class="paramname"><em>csr_access</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="csr__interface_8h.html#aaddaa76f39ec224e00fc5e04437992f4">t_csr_access_data</a>&#160;</td>
          <td class="paramname"><em>csr_access_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>csr_select</em>[16]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>Clock for the CSR interface, possibly gated version of master CSR clock </td></tr>
    <tr><td class="paramname">reset_n</td><td>Active low reset </td></tr>
    <tr><td class="paramname">csr_request</td><td>Pipelined csr request interface input </td></tr>
    <tr><td class="paramname">csr_response</td><td>Pipelined csr request interface response </td></tr>
    <tr><td class="paramname">csr_access</td><td>Registered CSR access request to client </td></tr>
    <tr><td class="paramname">csr_access_data</td><td>Read data valid combinatorially based on csr_access </td></tr>
    <tr><td class="paramname">csr_select</td><td>Hard-wired select value for the client </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac9f9e135863def831109280ac258f6f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module csr_target_timeout </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="csr__interface_8h.html#structt__csr__request">t_csr_request</a>&#160;</td>
          <td class="paramname"><em>csr_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="csr__interface_8h.html#structt__csr__response">t_csr_response</a>&#160;</td>
          <td class="paramname"><em>csr_response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>csr_timeout</em>[16]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>Clock for the CSR interface, possibly gated version of master CSR clock </td></tr>
    <tr><td class="paramname">reset_n</td><td>Active low reset </td></tr>
    <tr><td class="paramname">csr_request</td><td>Pipelined csr request interface input </td></tr>
    <tr><td class="paramname">csr_response</td><td>Pipelined csr request interface response </td></tr>
    <tr><td class="paramname">csr_timeout</td><td>Number of cycles to wait for until auto-acknowledging a request </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Sep 30 2018 17:21:43 for CDL Modules by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
