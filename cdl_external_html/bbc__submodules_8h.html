<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CDL Modules: cdl/inc/bbc_submodules.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CDL Modules
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Modules</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b89025be567f5b6d36b8bc23257fdaf4.html">cdl</a></li><li class="navelem"><a class="el" href="dir_af298877340144433539b3d17cce7a97.html">inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">bbc_submodules.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>BBC micro CDL submodules.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>BBC micro CDL submodules. </p>
<p>Copyright (C) 2016-2017, Gavin J Stark. All rights reserved.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>
<p>Header file for the modules required for the BBC micro CDL implementation. It should probably be tidied up to put the SRAMs separately, and to start to pull together a cpu/peripheral CDL module header file of its own. But it will do for now </p>
</div><h2 class="groupheader">Modules</h2>
<a class="anchor" id="a2689e042521fe4e461ec3b6edc42d35d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module acia6850 </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>read_not_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>chip_select</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>chip_select_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>data_in</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>data_out</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>irq_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>tx_clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>rx_clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>txd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>cts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>rxd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>rts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>dcd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>Clock that rises when the 'enable' of the 6850 completes - but a real clock for this model </td></tr>
    <tr><td class="paramname">read_not_write</td><td>Indicates a read transaction if asserted and chip selected </td></tr>
    <tr><td class="paramname">chip_select</td><td>Active high chip select </td></tr>
    <tr><td class="paramname">chip_select_n</td><td>Active low chip select </td></tr>
    <tr><td class="paramname">address</td><td>Changes during phase 1 (phi[0] high) with address to read or write </td></tr>
    <tr><td class="paramname">data_in</td><td>Data in (from CPU) </td></tr>
    <tr><td class="paramname">data_out</td><td>Read data out (to CPU) </td></tr>
    <tr><td class="paramname">irq_n</td><td>Active low interrupt </td></tr>
    <tr><td class="paramname">tx_clk</td><td>Clock used for transmit data - must be really about at most quarter the speed of clk </td></tr>
    <tr><td class="paramname">rx_clk</td><td>Clock used for receive data - must be really about at most quarter the speed of clk </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4683f1a0ea91e98e359ce8700335ed3d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module bbc_display </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__display__sram__write">t_bbc_display_sram_write</a>&#160;</td>
          <td class="paramname"><em>display_sram_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__floppy__sram__request">t_bbc_floppy_sram_request</a>&#160;</td>
          <td class="paramname"><em>floppy_sram_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__keyboard">t_bbc_keyboard</a>&#160;</td>
          <td class="paramname"><em>keyboard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__floppy__sram__response">t_bbc_floppy_sram_response</a>&#160;</td>
          <td class="paramname"><em>floppy_sram_response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>Clock running at 2MHz </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a48d8c89fa57c36dee73892db0f133938"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module bbc_display_sram </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__display">t_bbc_display</a>&#160;</td>
          <td class="paramname"><em>display</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__display__sram__write">t_bbc_display_sram_write</a>&#160;</td>
          <td class="paramname"><em>sram_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="csr__interface_8h.html#structt__csr__request">t_csr_request</a>&#160;</td>
          <td class="paramname"><em>csr_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="csr__interface_8h.html#structt__csr__response">t_csr_response</a>&#160;</td>
          <td class="paramname"><em>csr_response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>Clock running at 2MHz </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1b429ec30b63ea0a519aa0f3057cabe9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module bbc_floppy_sram </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__floppy__op">t_bbc_floppy_op</a>&#160;</td>
          <td class="paramname"><em>floppy_op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__floppy__response">t_bbc_floppy_response</a>&#160;</td>
          <td class="paramname"><em>floppy_response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__floppy__sram__request">t_bbc_floppy_sram_request</a>&#160;</td>
          <td class="paramname"><em>sram_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__floppy__sram__response">t_bbc_floppy_sram_response</a>&#160;</td>
          <td class="paramname"><em>sram_response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="csr__interface_8h.html#structt__csr__request">t_csr_request</a>&#160;</td>
          <td class="paramname"><em>csr_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="csr__interface_8h.html#structt__csr__response">t_csr_response</a>&#160;</td>
          <td class="paramname"><em>csr_response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>Clock running at 2MHz </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a133814bae07198d32d1a4b7d5c3902c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module bbc_keyboard_csr </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__keyboard">t_bbc_keyboard</a>&#160;</td>
          <td class="paramname"><em>keyboard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>keyboard_reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="csr__interface_8h.html#structt__csr__request">t_csr_request</a>&#160;</td>
          <td class="paramname"><em>csr_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="csr__interface_8h.html#structt__csr__response">t_csr_response</a>&#160;</td>
          <td class="paramname"><em>csr_response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>Clock running at 2MHz </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a378899ffbc2dec65504e0c4f138f4e8b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module bbc_keyboard_ps2 </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="input__devices_8h.html#structt__ps2__key__state">t_ps2_key_state</a>&#160;</td>
          <td class="paramname"><em>ps2_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__keyboard">t_bbc_keyboard</a>&#160;</td>
          <td class="paramname"><em>keyboard</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>Clock of PS2 keyboard </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af2d169db99d2693c8ac4880fba74e885"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module bbc_micro </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__clock__control">t_bbc_clock_control</a>&#160;</td>
          <td class="paramname"><em>clock_control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__clock__status">t_bbc_clock_status</a>&#160;</td>
          <td class="paramname"><em>clock_status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__keyboard">t_bbc_keyboard</a>&#160;</td>
          <td class="paramname"><em>keyboard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__display">t_bbc_display</a>&#160;</td>
          <td class="paramname"><em>display</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>keyboard_reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__floppy__op">t_bbc_floppy_op</a>&#160;</td>
          <td class="paramname"><em>floppy_op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__floppy__response">t_bbc_floppy_response</a>&#160;</td>
          <td class="paramname"><em>floppy_response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__micro__sram__request">t_bbc_micro_sram_request</a>&#160;</td>
          <td class="paramname"><em>host_sram_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__micro__sram__response">t_bbc_micro_sram_response</a>&#160;</td>
          <td class="paramname"><em>host_sram_response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>Clock at least at '4MHz' - CPU runs at least half of this </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0f8414d43890792cb7c058602721478a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module bbc_micro_clocking </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__clock__status">t_bbc_clock_status</a>&#160;</td>
          <td class="paramname"><em>clock_status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__clock__control">t_bbc_clock_control</a>&#160;</td>
          <td class="paramname"><em>clock_control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="csr__interface_8h.html#structt__csr__request">t_csr_request</a>&#160;</td>
          <td class="paramname"><em>csr_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="csr__interface_8h.html#structt__csr__response">t_csr_response</a>&#160;</td>
          <td class="paramname"><em>csr_response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>4MHz clock in as a minimum </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a68ec82502b13347e686fe1714080b20b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module bbc_micro_keyboard </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>reset_out_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>keyboard_enable_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>column_select</em>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>row_select</em>[3], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>key_in_column_pressed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>selected_key_pressed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__keyboard">t_bbc_keyboard</a>&#160;</td>
          <td class="paramname"><em>bbc_keyboard</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reset_out_n</td><td>From the Break key </td></tr>
    <tr><td class="paramname">keyboard_enable_n</td><td>Asserted to make keyboard detection operate </td></tr>
    <tr><td class="paramname">column_select</td><td>Wired to pa[4;0], and indicates which column of the keyboard matrix to access </td></tr>
    <tr><td class="paramname">row_select</td><td>Wired to pa[3;4], and indicates which row of the keyboard matrix to access </td></tr>
    <tr><td class="paramname">key_in_column_pressed</td><td>Wired to CA2, asserted if keyboard_enable_n and a key is pressed in the specified column (other than row 0) </td></tr>
    <tr><td class="paramname">selected_key_pressed</td><td>Asserted if keyboard_enable_n is asserted and the selected key is pressed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a25da2a35644407b9f66497454d28f7bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module bbc_micro_rams </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__clock__control">t_bbc_clock_control</a>&#160;</td>
          <td class="paramname"><em>clock_control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__micro__sram__request">t_bbc_micro_sram_request</a>&#160;</td>
          <td class="paramname"><em>host_sram_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__micro__sram__response">t_bbc_micro_sram_response</a>&#160;</td>
          <td class="paramname"><em>host_sram_response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__display__sram__write">t_bbc_display_sram_write</a>&#160;</td>
          <td class="paramname"><em>display_sram_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__floppy__sram__request">t_bbc_floppy_sram_request</a>&#160;</td>
          <td class="paramname"><em>floppy_sram_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__floppy__sram__response">t_bbc_floppy_sram_response</a>&#160;</td>
          <td class="paramname"><em>floppy_sram_response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__micro__sram__request">t_bbc_micro_sram_request</a>&#160;</td>
          <td class="paramname"><em>bbc_micro_host_sram_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__micro__sram__response">t_bbc_micro_sram_response</a>&#160;</td>
          <td class="paramname"><em>bbc_micro_host_sram_response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>4MHz clock in as a minimum </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac4a65014115f15143a7ec0e72c142145"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module bbc_vidproc </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk_cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk_2MHz_video</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>chip_select_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>cpu_data_in</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>pixel_data_in</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>disen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>invert_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>cursor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>saa5050_red</em>[6], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>saa5050_green</em>[6], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>saa5050_blue</em>[6], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>crtc_clock_enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>red</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>green</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>blue</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#a51ee698f2790beed10c5dbed353e12d6">t_bbc_pixels_per_clock</a>&#160;</td>
          <td class="paramname"><em>pixels_valid_per_clock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">clk_cpu</td><td>Output on real chip in a sense (2MHz out somewhat) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">clk_2MHz_video</td><td>Output on real chip, 2MHz video clock </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reset_n</td><td>Not present on the chip, but required for the model - power up reset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">chip_select_n</td><td>Active low chip select </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>Valid with chip select </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cpu_data_in</td><td>Data in (from CPU) - was combined with pixel_data_in in BBC micro to save pins </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pixel_data_in</td><td>Data in (from RAM) - was combined with cpu_data_in in BBC micro to save pins </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">disen</td><td>Asserted by CRTC if black output required (e.g. during sync) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">invert_n</td><td>Asserted (low) if the output should be inverted (post-disen probably) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cursor</td><td>Asserted for first character of a cursor </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">saa5050_red</td><td>3 pixels in at 2MHz, red component, from teletext </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">saa5050_green</td><td>3 pixels in at 2MHz, green component, from teletext </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">saa5050_blue</td><td>3 pixels out at 2MHz, blue component, from teletext </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">crtc_clock_enable</td><td>High for 2MHz, toggles for 1MHz - the 'character clock' - used also to determine when the shift register is loaded </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">red</td><td>8 pixels out at 2MHz, red component </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">green</td><td>8 pixels out at 2MHz, green component </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">blue</td><td>8 pixels out at 2MHz, blue component </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a644a62132f1e8213cc2c38bc376c8ab2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module cpu6502 </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>ready</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>irq_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>nmi_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>ba</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>address</em>[16], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>read_not_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>data_out</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>data_in</em>[8]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>Clock, rising edge is start of phi1, end of phi2 - the phi1/phi2 boundary is not required </td></tr>
    <tr><td class="paramname">ready</td><td>Stops processor during current instruction. Does not stop a write phase. Address bus reflects current address being read. Stops the phase 2 from happening. </td></tr>
    <tr><td class="paramname">irq_n</td><td>Active low interrupt in </td></tr>
    <tr><td class="paramname">nmi_n</td><td>Active low non-maskable interrupt in </td></tr>
    <tr><td class="paramname">ba</td><td>Goes high during phase 2 if ready was low in phase 1 if read_not_write is 1, to permit someone else to use the memory bus </td></tr>
    <tr><td class="paramname">address</td><td>In real 6502, changes during phi 1 with address to read or write </td></tr>
    <tr><td class="paramname">read_not_write</td><td>In real 6502, changes during phi 1 with whether to read or write </td></tr>
    <tr><td class="paramname">data_out</td><td>In real 6502, valid at end of phi2 with data to write </td></tr>
    <tr><td class="paramname">data_in</td><td>Captured at the end of phi2 (rising clock in here) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5f22a298e326e8a0367b23d47906de47"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module crtc6845 </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk_2MHz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk_1MHz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>ma</em>[14], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>ra</em>[5], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>read_not_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>chip_select_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>rs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>data_in</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>data_out</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>lpstb_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>crtc_clock_enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>de</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>cursor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>hsync</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>vsync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk_1MHz</td><td>Clock that rises when the 'enable' of the 6845 completes - but a real clock for this model </td></tr>
    <tr><td class="paramname">ma</td><td>Memory address </td></tr>
    <tr><td class="paramname">ra</td><td>Row address </td></tr>
    <tr><td class="paramname">read_not_write</td><td>Indicates a read transaction if asserted and chip selected </td></tr>
    <tr><td class="paramname">chip_select_n</td><td>Active low chip select </td></tr>
    <tr><td class="paramname">rs</td><td>Register select - address line really </td></tr>
    <tr><td class="paramname">data_in</td><td>Data in (from CPU) </td></tr>
    <tr><td class="paramname">data_out</td><td>Data out (to CPU) </td></tr>
    <tr><td class="paramname">lpstb_n</td><td>Light pen strobe </td></tr>
    <tr><td class="paramname">crtc_clock_enable</td><td>Not on the real chip - really CLK - the character clock - but this is an enable for clk_2MHz </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8c7898dee79f3874f6f4f95a0900f529"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module fdc8271 </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>chip_select_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>read_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>write_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>address</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>data_in</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>data_out</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>irq_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>data_req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>data_ack_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>select</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>ready</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>fault_reset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>write_enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>seek_step</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>load_head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>low_current</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>track_0_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>write_protect_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>index_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output <a class="el" href="bbc__micro__types_8h.html#structt__bbc__floppy__op">t_bbc_floppy_op</a>&#160;</td>
          <td class="paramname"><em>bbc_floppy_op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__floppy__response">t_bbc_floppy_response</a>&#160;</td>
          <td class="paramname"><em>bbc_floppy_response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reset_n</td><td>8271 has an active high reset, but... </td></tr>
    <tr><td class="paramname">chip_select_n</td><td>Active low chip select </td></tr>
    <tr><td class="paramname">read_n</td><td>Indicates a read transaction if asserted and chip selected </td></tr>
    <tr><td class="paramname">write_n</td><td>Indicates a write transaction if asserted and chip selected </td></tr>
    <tr><td class="paramname">address</td><td>Address of register being accessed </td></tr>
    <tr><td class="paramname">data_in</td><td>Data in (from CPU) </td></tr>
    <tr><td class="paramname">data_out</td><td>Read data out (to CPU) </td></tr>
    <tr><td class="paramname">irq_n</td><td>Was INT on the 8271, but that means something else now; active low interrupt </td></tr>
    <tr><td class="paramname">select</td><td>drive select </td></tr>
    <tr><td class="paramname">ready</td><td>drive ready </td></tr>
    <tr><td class="paramname">write_enable</td><td>High if the drive should write data </td></tr>
    <tr><td class="paramname">seek_step</td><td>High if the drive should step </td></tr>
    <tr><td class="paramname">direction</td><td>Direction of step </td></tr>
    <tr><td class="paramname">load_head</td><td>Enable drive head </td></tr>
    <tr><td class="paramname">low_current</td><td>Asserted for track&gt;=43 </td></tr>
    <tr><td class="paramname">track_0_n</td><td>Asserted low if the selected drive is on track 0 </td></tr>
    <tr><td class="paramname">write_protect_n</td><td>Asserted low if the selected drive is write-protected </td></tr>
    <tr><td class="paramname">index_n</td><td>Asserted low if the selected drive photodiode indicates start of track </td></tr>
    <tr><td class="paramname">bbc_floppy_op</td><td>Model drive operation, including write data </td></tr>
    <tr><td class="paramname">bbc_floppy_response</td><td>Parallel data read, specific to the model </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3c21850528b579e7b800510ee80a7785"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module saa5050 </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk_2MHz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>clk_1MHz_enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>superimpose_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>data_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>data_in</em>[7], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>dlim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>glr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>dew</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>crs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>bcs_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>tlc_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>lose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>de</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>po</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>red</em>[6], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>green</em>[6], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>blue</em>[6], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>blan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input <a class="el" href="bbc__micro__types_8h.html#structt__bbc__micro__sram__request">t_bbc_micro_sram_request</a>&#160;</td>
          <td class="paramname"><em>host_sram_request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk_2MHz</td><td>Supposedly 6MHz pixel clock (TR6), except we use 2MHz and deliver 3 pixels per tick; rising edge should be coincident with clk_1MHz edges </td></tr>
    <tr><td class="paramname">clk_1MHz_enable</td><td>Clock enable high for clk_2MHz when the SAA's 1MHz would normally tick </td></tr>
    <tr><td class="paramname">superimpose_n</td><td>Not implemented </td></tr>
    <tr><td class="paramname">data_n</td><td>Serial data in, not implemented </td></tr>
    <tr><td class="paramname">data_in</td><td>Parallel data in </td></tr>
    <tr><td class="paramname">dlim</td><td>clocks serial data in somehow (datasheet is dreadful...) </td></tr>
    <tr><td class="paramname">glr</td><td>General line reset - can be tied to hsync - assert once per line before data comes in </td></tr>
    <tr><td class="paramname">dew</td><td>Data entry window - used to determine flashing rate and resets the ROM decoders - can be tied to vsync </td></tr>
    <tr><td class="paramname">crs</td><td>Character rounding select - drive high on even interlace fields to enable use of rounded character data (kinda indicates 'half line') </td></tr>
    <tr><td class="paramname">bcs_n</td><td>Assert (low) to enable double-height characters (?) </td></tr>
    <tr><td class="paramname">tlc_n</td><td>Asserted (low) when double-height characters occur (?) </td></tr>
    <tr><td class="paramname">lose</td><td>Load output shift register enable - must be low before start of character data in a scanline, rising with (or one tick earlier?) the data; changes off falling F1, rising clk_1MHz </td></tr>
    <tr><td class="paramname">de</td><td>Display enable </td></tr>
    <tr><td class="paramname">po</td><td>Picture on </td></tr>
    <tr><td class="paramname">host_sram_request</td><td>Write only, writes on clk_2MHz rising, acknowledge must be handled by supermodule </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3a313fd006e2c1335e90c03aa50670e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">module via6522 </td>
          <td>(</td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">clock&#160;</td>
          <td class="paramname"><em>clk_io</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>reset_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>read_not_write</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>chip_select</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>chip_select_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>address</em>[4], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>data_in</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>data_out</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>irq_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>ca1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>ca2_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>ca2_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>pa_out</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>pa_in</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>cb1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>cb2_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>cb2_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">output bit&#160;</td>
          <td class="paramname"><em>pb_out</em>[8], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">input bit&#160;</td>
          <td class="paramname"><em>pb_in</em>[8]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clk</td><td>1MHz clock rising when bus cycle finishes </td></tr>
    <tr><td class="paramname">clk_io</td><td>1MHz clock rising when I/O should be captured - can be antiphase to clk </td></tr>
    <tr><td class="paramname">read_not_write</td><td>Indicates a read transaction if asserted and chip selected </td></tr>
    <tr><td class="paramname">chip_select</td><td>Active high chip select </td></tr>
    <tr><td class="paramname">chip_select_n</td><td>Active low chip select </td></tr>
    <tr><td class="paramname">address</td><td>Changes during phase 1 (phi[0] high) with address to read or write </td></tr>
    <tr><td class="paramname">data_in</td><td>Data in (from CPU) </td></tr>
    <tr><td class="paramname">data_out</td><td>Read data out (to CPU) </td></tr>
    <tr><td class="paramname">irq_n</td><td>Active low interrupt </td></tr>
    <tr><td class="paramname">ca1</td><td>Port a control 1 in </td></tr>
    <tr><td class="paramname">ca2_in</td><td>Port a control 2 in </td></tr>
    <tr><td class="paramname">ca2_out</td><td>Port a control 2 out </td></tr>
    <tr><td class="paramname">pa_out</td><td>Port a data out </td></tr>
    <tr><td class="paramname">pa_in</td><td>Port a data in </td></tr>
    <tr><td class="paramname">cb1</td><td>Port b control 1 in </td></tr>
    <tr><td class="paramname">cb2_in</td><td>Port b control 2 in </td></tr>
    <tr><td class="paramname">cb2_out</td><td>Port b control 2 out </td></tr>
    <tr><td class="paramname">pb_out</td><td>Port b data out </td></tr>
    <tr><td class="paramname">pb_in</td><td>Port b data in </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Mar 5 2017 18:00:42 for CDL Modules by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
